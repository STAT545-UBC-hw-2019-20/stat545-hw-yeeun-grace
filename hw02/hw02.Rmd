---
title: "hw02"
output: html_document
---


```{r, message = FALSE, warning = FALSE}
library(gapminder)
library(dplyr)
library(tidyverse)
library(ggplot2)
```

# 1.1 Use filter() to subset the gapminder data to three countries of your choice in the 1970’s.
```{r}
gapminder

subset_gap <- gapminder %>%
  filter(1980 > year & year > 1969,
         country == "Cambodia" | country == "Malaysia" | country == "Mongolia")

subset_gap
```


# 1.2 Use the pipe operator %>% to select “country” and “gdpPercap” from your filtered dataset in 1.1.
```{r}
subset_gap %>%
  select(country, gdpPercap)
```

#1.3 Filter gapminder to all entries that have experienced a drop in life expectancy. Be sure to include a new variable that’s the increase in life expectancy in your tibble. Hint: you might find the lag() or diff() functions useful.
```{r}
lifeExp_drop <- gapminder %>% 
  arrange(year) %>% 
  group_by(country) %>%
  mutate(lifeExp_inc = lifeExp - lag(lifeExp)) %>%
  filter(lifeExp_inc < 0)

DT::datatable(lifeExp_drop)

```

#1.4. Choose one of the following: Filter gapminder so that it shows the max GDP per capita experienced by each country. Hint: you might find the max() function useful here.

```{r}
maxgdp <- gapminder %>% 
  group_by(country) %>%
  filter(gdpPercap == max(gdpPercap))

DT::datatable(maxgdp)
```

# 1.5. Produce a scatterplot of Canada’s life expectancy vs. GDP per capita using ggplot2, without defining a new variable. That is, after filtering the gapminder data set, pipe it directly into the ggplot() function. Ensure GDP per capita is on a log scale.
```{r}
gapminder %>% 
  filter(country == "Canada") %>%
  ggplot(., aes(lifeExp, gdpPercap)) +
  geom_point(alpha = 0.5) +
  theme_bw() +
  xlab("Life Expectancy") +
  scale_y_log10("GDP per capita", labels = scales::dollar_format()) 
  
```

# 2. Pick one categorical variable and one quantitative variable to explore: 

# 2-1. Categorical variable: continent
What are possible values (or range, whichever is appropriate) of each variable?; 
What values are typical? What’s the spread? What’s the distribution? Etc., tailored to the variable at hand; 
Feel free to use summary stats, tables, figures
```{r}
# Levels and frequency
levels(gapminder$continent)
gapminder %>%
  group_by(continent) %>%
  summarize(count=n())

# Figure for distribution 
gapminder %>%
ggplot(aes(continent)) +
  geom_bar()

```

# 2-2. Quantitative variable: Life expectancy
What are possible values (or range, whichever is appropriate) of each variable?; 
What values are typical? What’s the spread? What’s the distribution? Etc., tailored to the variable at hand; 
Feel free to use summary stats, tables, figures
```{r}
#descriptive statistics 
range(gapminder$lifeExp)
mean(gapminder$lifeExp)
median(gapminder$lifeExp)

# figures for distribution
ggplot(gapminder, aes(lifeExp)) +
  geom_histogram(bins = 80)
```


# 2-3. Combining continent & Life expectancy

```{r}
ggplot(gapminder, aes(continent, lifeExp)) +
  geom_boxplot()
```

# 3 Make two plots that have some value to them. That is, plots that someone might actually consider making for an analysis. Just don’t make the same plots we made in class – feel free to use a data set from the datasets R package if you wish.

A scatterplot of two quantitative variables.
One other plot besides a scatterplot.
You don’t have to use all the data in every plot! It’s fine to filter down to one country or a small handful of countries.

#3.1. plot1: GDP per capital of two Koreas by year
```{r}
gapminder %>%
  filter (country == "Korea, Dem. Rep." | country == "Korea, Rep.") %>%
  ggplot(aes(x = year, y = gdpPercap, color = country)) + 
  geom_jitter()
```

#3.2. plot 2: Life expectancy of two Koreas by year
```{r}
gapminder %>%
  filter (country == "Korea, Dem. Rep." | country == "Korea, Rep.") %>%
  ggplot(aes(x = year, y = lifeExp, color = country)) +
  geom_jitter()
```

